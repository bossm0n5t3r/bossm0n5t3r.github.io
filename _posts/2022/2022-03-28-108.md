---
title: '[Clojure] Building, Running, and the REPL'
date: 2022-03-28 00:00:00 +0900
categories: [Clojure, functional-programming, functional-programming-language]
tags: [Clojure, functional-programming, functional-programming-language]
math: false
mermaid: false
image:
  src: /assets/img/posts/logos/Clojure_logo.png
  width: 250
---

## í˜„ì¬ Java, Clojure version ê¸°ë¡ìš©

```bash
$ java --version
openjdk 17.0.2 2022-01-18
OpenJDK Runtime Environment Temurin-17.0.2+8 (build 17.0.2+8)
OpenJDK 64-Bit Server VM Temurin-17.0.2+8 (build 17.0.2+8, mixed mode)

$ clj --version
Clojure CLI version 1.10.3.1087
```

## IDEëŠ” ë­˜ë¡œ í•˜ì§€

ê°€ì¥ ì¤‘ìš”í•œ ë¶€ë¶„ì´ë‹¤.

ê²€ìƒ‰í•´ë³´ë‹ˆ ë‹¤ì–‘í•œ ì˜µì…˜ë“¤ì´ ì¡´ì¬í•˜ëŠ”ë°, í¬ê²Œ ëˆˆì´ ê°€ëŠ” ë‘ ê°€ì§€ ì˜µì…˜ì€ ì•„ë˜ì™€ ê°™ë‹¤.

- `VSCode` + `Calva Extension`
  - [https://calva.io/](https://calva.io/)
  - [https://marketplace.visualstudio.com/items?itemName=betterthantomorrow.calva](https://marketplace.visualstudio.com/items?itemName=betterthantomorrow.calva)
- `Intellij CE` + `Cursive Extension`
  - [https://cursive-ide.com/userguide/](https://cursive-ide.com/userguide/)

ì¼ë‹¨ ë‘ ê°œ ëª¨ë‘ ì„¤ì¹˜í–ˆë‹¤. ë‚˜ì¤‘ì— í•„ìš”ì—†ëŠ”ê±¸ ì§€ìš°ëŠ” ë°©ë²•ìœ¼ë¡œ!

ë‹¹ì¥ì€ ìƒê°ì—†ì´ `VSCode` + `Calva Extension` ë¡œ ì§„í–‰í•˜ê² ë‹¤!

## Leiningen

ì˜¤ëŠ˜ë‚  ëŒ€ë¶€ë¶„ì˜ ClojuristsëŠ” `Leiningen` ë¥¼ ì‚¬ìš©í•˜ëŠ” ë“¯í•˜ë‹¤. (ë¼ê³  ì í˜€ìˆë‹¤)

- `Clojurists`ë¼ë‹ˆ... ì´ë¦„ ë©‹ì§€ë‹¤ ğŸ˜

ì•„ë˜ì™€ ê°™ì€ ì¼ì„ í•´ì¤€ë‹¤ê³  í•œë‹¤.

1. Creating a new Clojure project
2. Running the Clojure project
3. Building the Clojure project
4. Using the REPL

í™ˆí˜ì´ì§€ëŠ” [https://leiningen.org/](https://leiningen.org/) ì´ë‹¤.

ê³µì‹ í™ˆí˜ì´ì§€ì—ì„œëŠ” ìŠ¤í¬ë¦½íŠ¸ë¥¼ ë‹¤ìš´ë¡œë“œ ë°›ê³ , ë³„ë„ë¡œ PATH ì„¤ì • í›„ ì‚¬ìš©í•˜ë¼ê³  ë˜ì–´ìˆëŠ”ë°,

homebrewë¥¼ ì°¾ì•„ë³´ë‹ˆ ì˜ ìˆì–´ì„œ ê·¸ëƒ¥ brewë¡œ ì„¤ì¹˜í•´ë³´ê² ë‹¤.

```bash
$ brew install leiningen
$ lein --version
Leiningen 2.9.8 on Java 17.0.2 OpenJDK 64-Bit Server VM
```

## ìƒˆë¡œìš´ Project ë§Œë“¤ê¸°

ë„ˆë¬´ ë‹¤ì–‘í•œ ì˜µì…˜ì´ ìˆëŠ” ê²ƒ ê°™ì€ë°, ì¼ë‹¨ í•˜ë‚˜ë„ ëª¨ë¥´ê² ê³ 

[https://www.braveclojure.com/getting-started/](https://www.braveclojure.com/getting-started/) ì„ ë”°ë¼ê°€ë©´ì„œ ë§Œë“¤ì–´ë³´ê² ë‹¤.

```bash
$ lein new app learning-clojure
Generating a project called learning-clojure based on the 'app' template.
```

ê·¸ëŸ¼ ì•„ë˜ì™€ ê°™ì´ ìƒê¸´ë‹¤.

```bash
$ tree .
.
â”œâ”€â”€ CHANGELOG.md
â”œâ”€â”€ LICENSE
â”œâ”€â”€ README.md
â”œâ”€â”€ doc
â”‚Â Â  â””â”€â”€ intro.md
â”œâ”€â”€ project.clj
â”œâ”€â”€ resources
â”œâ”€â”€ src
â”‚Â Â  â””â”€â”€ learning_clojure
â”‚Â Â      â””â”€â”€ core.clj
â””â”€â”€ test
    â””â”€â”€ learning_clojure
        â””â”€â”€ core_test.clj

6 directories, 7 files
```

## Clojure Project ì‹¤í–‰í•˜ê¸°

`/src/learning-clojure/core.clj` íŒŒì¼ì„ ë³´ë©´ ì•„ë˜ì™€ ê°™ë‹¤.

```clojure
(ns learning-clojure.core
  (:gen-class))

#_{:clj-kondo/ignore [:unused-binding]} ; <- ì´ ë¼ì¸ì€ VSCodeì—ì„œ ë¦°íŠ¸ë•Œë¬¸ì— ì¶”ê°€í•´ì¤¬ë‹¤.
(defn -main
  "I don't do a whole lot ... yet."
  [& args]
  (println "Hello, World!"))
```

ì´ì œ ì•„ë˜ì™€ ê°™ì´ `lein run` ì„ í†µí•´ì„œ ì‹¤í–‰í•˜ë©´ ì•„ë˜ì™€ ê°™ë‹¤.

```bash
$ lein run
Hello, World!
```

ë§Œì•½, `/src/learning-clojure/core.clj` íŒŒì¼ì—ì„œ `(println "Hello, World!"))` ë¼ì¸ì„ ë§ˆìŒëŒ€ë¡œ ë°”ê¿”ì„œ ë‹¤ì‹œ `lein run` ì„ ì‹¤í–‰í•˜ë©´ ì•„ë˜ì™€ ê°™ì´ ë°”ë€ë‹¤.

```clojure
(ns learning-clojure.core
  (:gen-class))

#_{:clj-kondo/ignore [:unused-binding]}
(defn -main
  "I don't do a whole lot ... yet."
  [& args]
  (println "Hello, World! in VSCode"))
```

```bash
$ lein run
Hello, World! in VSCode
```

## Clojure Project Buildingí•˜ê¸°

`lein run` ìœ¼ë¡œ ì‹¤í–‰í•˜ë©´, ì–´ëŠ ëˆ„êµ¬ë„ ê°™ì€ ì½”ë“œë¡œ ê°™ì€ ì‹¤í–‰ ê²°ê³¼ë¥¼ ì–»ì„ ìˆ˜ ìˆì§€ë§Œ,

`Leiningen` ê°€ ì„¤ì¹˜ë˜ì–´ ìˆì§€ ì•Šì€ ì‚¬ëŒê³¼ ê°™ì´ ì¼í•  ê²½ìš°ì—ëŠ” ì–´ë–»ê²Œ í•´ì•¼í• ê¹Œ?

ì´ëŸ´ ë•Œë¥¼ ìœ„í•´ì„œ ìë°”ê°€ ì„¤ì¹˜ë˜ì–´ ìˆëŠ” ì‚¬ëŒë“¤ì—ê²Œ ì‹¤í–‰ ê°€ëŠ¥í•œ íŒŒì¼ì„ ìƒì„±í•´ì¤˜ì•¼ í•œë‹¤.

ê·¸ë ‡ê²Œ í•˜ê¸° ìœ„í•´ì„œ ì•„ë˜ì™€ ê°™ì´ ì‹¤í–‰í•´ì£¼ë©´ ëœë‹¤.

```bash
$ lein uberjar
```

> ì™œ uberjar ì¼ê¹Œ? ë‹¤ë¥¸ XXXjarëŠ” ì•ˆë˜ë‚˜?

ì•ˆëœë‹¤. ê·¸ëƒ¥ ëª…ë ¹ì–´ì´ë‹¤.
[https://github.com/technomancy/leiningen/blob/stable/doc/TUTORIAL.md#uberjar](https://github.com/technomancy/leiningen/blob/stable/doc/TUTORIAL.md#uberjar)
ë­” ìš°ë²„ì¸ê°€ ì‹¶ì—ˆëŠ”ë° ë‹¤~ ì˜ë¯¸ê°€ ìˆëŠ” ê²ƒì´ì—ˆë‹¤.

>

ê¶ê¸ˆí•´ì„œ help ì³ë³´ë©´ ì˜ ë‚˜ì˜¨ë‹¤.

```bash
$ lein help
Leiningen is a tool for working with Clojure projects.

Several tasks are available:
change              Rewrite project.clj with f applied to the value at key-or-path.
check               Check syntax and warn on reflection.
classpath           Write the classpath of the current project to output-file.
clean               Removes all files from paths in clean-targets for a project
compile             Compile Clojure source into .class files.
deploy              Deploy jar and pom to remote repository.
deps                Download and examine dependencies.
do                  Higher-order task to perform other tasks in succession.
help                Display a list of tasks or help for a given task or subtask.
install             Install jar and pom to the local repository; typically ~/.m2.
jar                 Package up all the project's files into a jar file.
javac               Compile Java source files.
new                 Generate scaffolding for a new project based on a template.
plugin              DEPRECATED. Please use the :user profile instead.
pom                 Write a pom.xml file to disk for Maven interoperability.
release             Perform release tasks.
repl                Start a repl session either with the current project or standalone.
retest              Run only the test namespaces which failed last time around.
run                 Run the project's -main function.
search              Search Central and Clojars for published artifacts.
show-profiles       List all available profiles or display one if given an argument.
test                Run the project's tests.
trampoline          Run a task without nesting the project's JVM inside Leiningen's.
uberjar             Package up the project files and all dependencies into a jar file.
update-in           Perform arbitrary transformations on your project map.
upgrade             Upgrade Leiningen to specified version or latest stable.
vcs                 Interact with the version control system.
version             Print version for Leiningen and the current JVM.
with-profile        Apply the given task with the profile(s) specified.

Run `lein help $TASK` for details.

Global Options:
  -o             Run a task offline.
  -U             Run a task after forcing update of snapshots.
  -h, --help     Print this help or help for a specific task.
  -v, --version  Print Leiningen's version.

These aliases are available:
downgrade, expands to upgrade

See also: readme, faq, tutorial, news, sample, profiles, deploying, gpg,
mixed-source, templates, and copying.
```

ì•„ë¬´íŠ¼ ì‹¤í–‰í•´ë³´ë©´ ì•„ë˜ì™€ ê°™ë‹¤.

```bash
$ lein uberjar
Compiling learning-clojure.core
Created /Users/bossm0n5t3r/gitFolders/learning-clojure/target/uberjar/learning-clojure-0.1.0-SNAPSHOT.jar
Created /Users/bossm0n5t3r/gitFolders/learning-clojure/target/uberjar/learning-clojure-0.1.0-SNAPSHOT-standalone.jar
```

`target/` ë°‘ì— ë­”ê°€ ìƒê²¼ë‹¤. í™•ì¸í•´ë³´ì.

```bash
$ tree target
target
â””â”€â”€ uberjar
    â”œâ”€â”€ classes
    â”‚   â”œâ”€â”€ META-INF
    â”‚   â”‚   â””â”€â”€ maven
    â”‚   â”‚       â””â”€â”€ learning-clojure
    â”‚   â”‚           â””â”€â”€ learning-clojure
    â”‚   â”‚               â””â”€â”€ pom.properties
    â”‚   â””â”€â”€ learning_clojure
    â”‚       â”œâ”€â”€ core$_main.class
    â”‚       â”œâ”€â”€ core$fn__173.class
    â”‚       â”œâ”€â”€ core$loading__6737__auto____171.class
    â”‚       â”œâ”€â”€ core.class
    â”‚       â””â”€â”€ core__init.class
    â”œâ”€â”€ learning-clojure-0.1.0-SNAPSHOT-standalone.jar
    â”œâ”€â”€ learning-clojure-0.1.0-SNAPSHOT.jar
    â””â”€â”€ stale
        â””â”€â”€ leiningen.core.classpath.extract-native-dependencies

8 directories, 9 files
```

javaë¡œ ì‹¤í–‰í•˜ë ¤ë©´ ì•„ë˜ì™€ ê°™ì´ í•˜ë©´ ëœë‹¤.

```bash
$ java -jar target/uberjar/learning-clojure-0.1.0-SNAPSHOT-standalone.jar
Hello, World!
```

ìŒ~ ì˜ ëœë‹¤.

## REPL ì‚¬ìš©í•˜ê¸°

REPLì´ ë­”ì§€ëŠ” ì•„ì§ë„ ëª¨ë¥¸ë‹¤.

ë‚˜ì¤‘ì— ë” ìì„¸íˆ ì•Œì•„ë³´ë„ë¡ í•˜ê³ , ì‹¤í–‰í•˜ë ¤ë©´ ì•„ë˜ì™€ ê°™ì´ ì‹¤í–‰í•˜ë©´ ëœë‹¤.

```bash
$ lein repl
nREPL server started on port 50880 on host 127.0.0.1 - nrepl://127.0.0.1:50880
REPL-y 0.5.1, nREPL 0.8.3
Clojure 1.10.3
OpenJDK 64-Bit Server VM 17.0.2+8
    Docs: (doc function-name-here)
          (find-doc "part-of-name-here")
  Source: (source function-name-here)
 Javadoc: (javadoc java-object-or-class-here)
    Exit: Control+D or (exit) or (quit)
 Results: Stored in vars *1, *2, *3, an exception in *e

learning-clojure.core=>
```

ì‹œê°„ì´ ì¡°ê¸ˆ ê±¸ë ¸ë‹¤.

ì´ì œ `learning-clojure.core=>` ë’¤ì— ì´ë¯¸ ì •ì˜ëœ í•¨ìˆ˜ë¥¼ ë„£ì–´ì£¼ë©´ ì‹¤í–‰ëœë‹¤.

ì•„ê¹Œì˜ main í•¨ìˆ˜ë¥¼ ì •ì˜í–ˆìœ¼ë¯€ë¡œ, í•´ë‹¹ í•¨ìˆ˜ë¥¼ ë„£ì–´ì£¼ë©´ ë‹¤ìŒê³¼ ê°™ì´ ì‹¤í–‰ëœë‹¤.

```bash
learning-clojure.core=> (-main)
Hello, World!
nil
```

ì•„ë˜ì™€ ê°™ì´ Clojureì˜ ê¸°ë³¸ í•¨ìˆ˜ë“¤ë„ ì‹¤í–‰í•  ìˆ˜ ìˆë‹¤.

```bash
learning-clojure.core=> (+ 1 2 3 4)
10
learning-clojure.core=> (* 1 2 3 4)
24
learning-clojure.core=> (first [1 2 3 4])
1
```

ë˜ ë‹¤ìŒê³¼ ê°™ì´ë„ ì‹¤í–‰ ê°€ëŠ¥í•˜ë‹¤.

```bash
learning-clojure.core=> (do (println "no prompt here!")
                   #_=> (+ 1 3))
no prompt here!
4
```

ì¢…ë£Œí•  ë•ŒëŠ” `Ctrl + D`, `(exit)`, `(quit)` ì¤‘ í•˜ë‚˜ë§Œ í•˜ë©´ ëœë‹¤.

```bash
learning-clojure.core=> (exit)
Bye for now!
```

## Next

**Part II: Language Fundamentals** ë¶€í„° ì‹œì‘í•˜ê² ë‹¤.

## References

- [https://www.braveclojure.com/getting-started/](https://www.braveclojure.com/getting-started/)
